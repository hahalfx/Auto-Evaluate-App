# 任务包导入流程演示

## 新的导入流程

### 步骤1：选择导入模式
用户打开任务创建页面，选择"导入任务包"模式。

### 步骤2：输入任务名称
用户输入任务名称，例如："车机语音测试任务2024"

### 步骤3：查看任务包结构说明
系统显示任务包结构要求：
```
任务包文件夹/
├── 唤醒词语料列表.xlsx    # 第一列：文件名，第二列：语料名
├── 测试语料列表.xlsx      # 第一列：文件名，第二列：语料名
└── audio/
    ├── wakeword/          # 唤醒词音频文件
    └── samples/           # 测试语料音频文件
```

**提示**：系统会自动验证文件夹结构，并在导入时进行智能重复检查。相同文本但不同音频文件路径的数据会被视为新数据。

### 步骤4：导入任务包
用户点击"导入任务包"按钮，选择任务包文件夹。

### 步骤5：自动处理
系统自动执行以下操作：
1. 验证任务包结构
2. 读取Excel文件
3. **智能重复检查**（基于文本+音频文件路径）
4. 创建新的唤醒词和测试语料
5. 关联音频文件
6. 创建任务

### 步骤6：显示导入结果
系统显示导入结果，包含重复检查统计：

```
✅ 任务包导入成功
任务 #123 已创建

唤醒词
├── 新增: 5 个
└── 重复: 2 个

测试语料
├── 新增: 8 个
└── 重复: 3 个

💡 系统已自动进行重复检查。重复的数据使用现有记录，
   相同文本但不同音频文件路径的数据作为新数据创建。
```

## 重复检查示例

### 示例1：完全重复
**数据库现有**：
- 唤醒词："小度小度" (音频: /path1/audio1.wav)

**导入任务包包含**：
- 唤醒词："小度小度" (音频: /path1/audio1.wav)

**结果**：使用现有ID，统计为"重复: 1 个"

### 示例2：部分重复（新数据）
**数据库现有**：
- 测试语料："打开音乐" (音频: /path2/audio2.wav)

**导入任务包包含**：
- 测试语料："打开音乐" (音频: /path3/audio3.wav)

**结果**：创建新记录，统计为"新增: 1 个"

### 示例3：无音频文件重复
**数据库现有**：
- 唤醒词："你好小度" (无音频文件)

**导入任务包包含**：
- 唤醒词："你好小度" (无音频文件)

**结果**：使用现有ID，统计为"重复: 1 个"

## 优势

### 1. 简化操作流程
- 无需单独的预检查步骤
- 一键导入，自动处理所有逻辑

### 2. 智能重复检查
- 基于文本内容和音频文件路径的组合判断
- 支持版本管理（相同文本，不同音频文件）
- 避免数据冗余

### 3. 清晰的结果反馈
- 显示详细的导入统计
- 明确区分新增和重复数据
- 提供智能重复检查说明

### 4. 路径规范化
- 统一处理不同操作系统的路径格式
- 支持中文路径和特殊字符
- 自动处理路径分隔符

## 用户体验改进

### 之前（需要预检查）
1. 输入任务名称
2. 点击"预检查任务包"
3. 选择文件夹
4. 查看预检查结果
5. 点击"直接导入任务包"
6. 再次选择文件夹
7. 查看导入结果

### 现在（一键导入）
1. 输入任务名称
2. 点击"导入任务包"
3. 选择文件夹
4. 查看导入结果（包含重复检查统计）

**改进**：从7步减少到4步，操作更简洁，体验更流畅。 